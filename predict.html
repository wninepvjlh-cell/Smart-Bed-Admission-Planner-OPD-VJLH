<!doctype html>
<html lang="th">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Predict - Smart Bed Admission Planner</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="firebase-init.js"></script>
  <script src="firestore-sync.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="access-control.js"></script>
 </head>
 <body>
  <button type="button" id="logoutBtn" class="logout-button">Logout</button>
    <script>
      window.addEventListener('DOMContentLoaded', function() {
        var role = (window.sbpAccessControl && window.sbpAccessControl.getUserRole()) || sessionStorage.getItem('app_user_role');
        if (role === 'ipd') {
          alert('‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ');
          window.location.href = 'dashboard.html';
        }
      });
    </script>
    <header style="background: linear-gradient(135deg, #80deea 0%, #81c784 100%); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);">
      <div style="padding: 24px; text-align: center;">
        <h1 style="font-size: 2.2rem; font-weight: 600; color: white; margin: 0;">Smart Bed Admission Planner</h1>
        <div style="font-size: 1.2rem; font-weight: 400; color: white;">‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡πÄ‡∏ß‡∏ä‡∏ä‡∏≤‡∏£‡∏±‡∏Å‡∏©‡πå ‡∏•‡∏≥‡∏õ‡∏≤‡∏á</div>
        <div style="font-size: 1rem; margin-top: 8px; color: rgba(255,255,255,0.9);">‡πÄ‡∏ß‡∏ä‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ü‡∏∑‡πâ‡∏ô‡∏ü‡∏π - ‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ô‡∏≠‡∏Å</div>
      </div>
    </header>
    <nav style="background: white; padding: 16px 24px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); width: 100%; margin-bottom: 0;">
      <div style="display:flex; align-items:center; gap:12px; flex-wrap:wrap;">
        <div style="display:flex; gap:12px; flex-wrap:wrap; justify-content:center; flex:1 1 auto;">
          <a class="nav-button" href="dashboard.html" style="padding: 10px 20px; border-radius: 8px; background: white; font-size: 15px; font-weight: 500; color: #00796b; text-decoration: none;">Dashboard</a>
          <a class="nav-button" href="predict.html" style="padding: 10px 20px; border-radius: 8px; background: white; font-size: 15px; font-weight: 500; color: #00796b;">‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏±‡∏ô Admit ‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏∏‡∏î</a>
          <a class="nav-button" href="booking.html" style="padding: 10px 20px; border-radius: 8px; background: white; font-size: 15px; font-weight: 500; color: #00796b;">‡∏à‡∏≠‡∏á‡πÄ‡∏ï‡∏µ‡∏¢‡∏á Admit</a>
          <a class="nav-button" href="registry.html" style="padding: 10px 20px; border-radius: 8px; background: white; font-size: 15px; font-weight: 500; color: #00796b;">‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏à‡∏≠‡∏á‡πÄ‡∏ï‡∏µ‡∏¢‡∏á</a>
          <a class="nav-button" href="ipd.html" style="padding: 10px 20px; border-radius: 8px; background: white; font-size: 15px; font-weight: 500; color: #00796b;">‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏ô(IPD)</a>
          <a class="nav-button" href="data-archive.html" style="padding: 10px 20px; border-radius: 8px; background: white; font-size: 15px; font-weight: 500; color: #00796b;">‡∏Ñ‡∏•‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</a>
        </div>
      </div>
    </nav>
  <div class="app-container">
   <main style="padding:24px;background:linear-gradient(135deg,#e0f7fa 0%,#e8f5e9 100%);min-height:calc(100vh - 250px);">
     <div style="max-width:1200px;margin:0 auto;">
       <!-- Page Title -->
       <div style="background:linear-gradient(135deg,#ffffff 0%,#e0f7fa 100%);border-radius:24px;padding:32px;margin-bottom:24px;box-shadow:0 4px 16px rgba(0,0,0,0.1);border-left:6px solid #00897b;text-align:center;">
         <div style="display:flex;align-items:center;justify-content:center;gap:16px;margin-bottom:12px;">
           <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="url(#gradient1)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
             <defs>
               <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
                 <stop offset="0%" style="stop-color:#00897b;stop-opacity:1" />
                 <stop offset="100%" style="stop-color:#26a69a;stop-opacity:1" />
               </linearGradient>
             </defs>
             <circle cx="12" cy="12" r="9" stroke-width="1.5"/>
             <path d="M12 7v5l3 3" stroke-width="1.5" stroke-linecap="round"/>
             <circle cx="12" cy="12" r="1.5" fill="url(#gradient1)"/>
           </svg>
         </div>
         <p style="color:#00695c;margin:0;font-size:16px;">‡∏£‡∏∞‡∏ö‡∏ö AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏ß‡πà‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ Admit ‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</p>
       </div>

       <!-- Floor 1 Section -->
       <div style="background:linear-gradient(135deg,#f5f5f5 0%,#eeeeee 100%);border-radius:16px;padding:20px;margin-bottom:20px;box-shadow:0 2px 8px rgba(0,0,0,0.08);border:2px solid #bdbdbd;opacity:0.7;">
         <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px;">
           <!-- Floor Title -->
           <div style="display:flex;align-items:center;gap:12px;">
             <div style="background:#9e9e9e;width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;">
               <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                 <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                 <line x1="3" y1="9" x2="21" y2="9"/>
                 <line x1="9" y1="21" x2="9" y2="9"/>
               </svg>
             </div>
             <h3 style="font-size:20px;color:#616161;margin:0;font-weight:700;">‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏ô‡∏ä‡∏±‡πâ‡∏ô 1</h3>
           </div>
           
           <!-- Bed Info Inline -->
           <div style="display:flex;gap:20px;flex-wrap:wrap;">
             <div style="text-align:center;">
               <p style="font-size:12px;color:#757575;margin:0 0 4px 0;font-weight:600;">‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏™‡∏≤‡∏°‡∏±‡∏ç</p>
               <p style="font-size:18px;color:#9e9e9e;margin:0;font-weight:700;">Coming Soon</p>
             </div>
             <div style="border-left:2px solid #bdbdbd;"></div>
             <div style="text-align:center;">
               <p style="font-size:12px;color:#757575;margin:0 0 4px 0;font-weight:600;">‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏©</p>
               <p style="font-size:18px;color:#9e9e9e;margin:0;font-weight:700;">Coming Soon</p>
             </div>
           </div>
         </div>
       </div>

       <!-- Floor 2 Section -->
       <div style="background:linear-gradient(135deg,#ffffff 0%,#e0f7fa 100%);border-radius:16px;padding:20px;margin-bottom:24px;box-shadow:0 2px 8px rgba(77,208,225,0.2);border:2px solid #4dd0e1;">
         <div style="display:flex;justify-content:flex-end;margin-bottom:8px;">
           <span id="predict-last-update" style="color:#00897b;font-size:13px;font-weight:500;"></span>
         </div>
         <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px;">
           <!-- Floor Title -->
           <div style="display:flex;align-items:center;gap:12px;">
             <div style="background:linear-gradient(135deg,#00897b 0%,#00796b 100%);width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px rgba(0,137,123,0.3);">
               <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                 <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                 <line x1="3" y1="9" x2="21" y2="9"/>
                 <line x1="9" y1="21" x2="9" y2="9"/>
               </svg>
             </div>
             <h3 style="font-size:20px;color:#004d40;margin:0;font-weight:700;">‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏ô‡∏ä‡∏±‡πâ‡∏ô 2</h3>
           </div>
           
           <!-- Bed Info Inline -->
           <div style="display:flex;gap:24px;flex-wrap:wrap;flex:1;justify-content:flex-end;">
             <!-- Standard Beds -->
             <div style="background:linear-gradient(135deg,#e0f7fa 0%,#b2ebf2 100%);padding:16px 20px;border-radius:12px;border:2px solid #80deea;min-width:280px;">
               <div style="display:flex;align-items:center;gap:12px;">
                 <div style="background:#4dd0e1;width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0;">
                   <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                     <rect x="2" y="7" width="20" height="14" rx="2" ry="2"/>
                     <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/>
                   </svg>
                 </div>
                 <div style="flex:1;">
                   <p style="font-size:13px;color:#00695c;margin:0 0 4px 0;font-weight:600;">‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏™‡∏≤‡∏°‡∏±‡∏ç (B4-B12, B14-B16)</p>
                   <p id="standard-earliest-date" style="font-size:16px;color:#00796b;margin:0;font-weight:700;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...</p>
                   <p id="standard-bed-info" style="font-size:11px;color:#00695c;margin:2px 0 0 0;"></p>
                 </div>
               </div>
             </div>
             
             <!-- Special Rooms -->
             <div style="background:linear-gradient(135deg,#e8f5e9 0%,#c8e6c9 100%);padding:16px 20px;border-radius:12px;border:2px solid #a5d6a7;min-width:280px;">
               <div style="display:flex;align-items:center;gap:12px;">
                 <div style="background:#66bb6a;width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0;">
                   <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                     <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
                   </svg>
                 </div>
                 <div style="flex:1;">
                   <p style="font-size:13px;color:#1b5e20;margin:0 0 4px 0;font-weight:600;">‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏© (V1-V6)</p>
                   <p id="special-earliest-date" style="font-size:16px;color:#2e7d32;margin:0;font-weight:700;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...</p>
                   <p id="special-bed-info" style="font-size:11px;color:#1b5e20;margin:2px 0 0 0;"></p>
                 </div>
               </div>
             </div>
           </div>
         </div>
       </div>

       <!-- AI Prediction Tool Section -->
       <div style="background:linear-gradient(135deg,#e3f2fd 0%,#bbdefb 100%);border-radius:20px;padding:24px;margin-top:24px;box-shadow:0 4px 16px rgba(0,0,0,0.1);border:2px solid #90caf9;">
         <div style="display:flex;align-items:center;gap:12px;margin-bottom:20px;">
           <div style="background:linear-gradient(135deg,#64b5f6 0%,#42a5f5 100%);width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px rgba(100,181,246,0.3);">
             <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
               <path d="M12 2v6"/>
               <path d="M12 18v4"/>
               <path d="m4.93 4.93 4.24 4.24"/>
               <path d="m14.83 14.83 4.24 4.24"/>
               <path d="M2 12h6"/>
               <path d="M16 12h6"/>
               <path d="m4.93 19.07 4.24-4.24"/>
               <path d="m14.83 9.17 4.24-4.24"/>
               <circle cx="12" cy="12" r="3"/>
             </svg>
           </div>
           <h3 style="font-size:24px;color:#1976d2;margin:0;font-weight:700;">ü§ñ ‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå Admit ‡∏î‡πâ‡∏ß‡∏¢ AI</h3>
         </div>

         <div style="background:white;padding:24px;border-radius:16px;border:2px solid #90caf9;">
           <p style="color:#1976d2;margin:0 0 20px 0;font-size:15px;font-weight:600;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ï‡∏µ‡∏¢‡∏á ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Admit ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°</p>
           
           <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:20px;">
             <!-- Ward Floor -->
             <div>
               <label style="display:block;color:#1565c0;font-weight:600;margin-bottom:8px;font-size:14px;">‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ *</label>
               <select id="ai-ward-floor" style="width:100%;padding:12px;border:2px solid#90caf9;border-radius:8px;font-size:14px;font-weight:500;">
                 <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ --</option>
                 <option value="1">‡∏ä‡∏±‡πâ‡∏ô 1 (Coming Soon)</option>
                 <option value="2">‡∏ä‡∏±‡πâ‡∏ô 2</option>
               </select>
             </div>

             <!-- Bed Type -->
             <div>
               <label style="display:block;color:#1565c0;font-weight:600;margin-bottom:8px;font-size:14px;">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ï‡∏µ‡∏¢‡∏á *</label>
               <select id="ai-bed-type" style="width:100%;padding:12px;border:2px solid #90caf9;border-radius:8px;font-size:14px;font-weight:500;">
                 <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏ï‡∏µ‡∏¢‡∏á --</option>
                 <option value="standard">‡πÄ‡∏ï‡∏µ‡∏¢‡∏á‡∏™‡∏≤‡∏°‡∏±‡∏ç</option>
                 <option value="special">‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏©</option>
               </select>
             </div>

             <!-- Admit Date -->
             <div>
               <label style="display:block;color:#1565c0;font-weight:600;margin-bottom:8px;font-size:14px;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Admit *</label>
               <input type="date" id="ai-admit-date" style="width:100%;padding:12px;border:2px solid #90caf9;border-radius:8px;font-size:14px;font-weight:500;">
             </div>
           </div>

           <button onclick="checkAvailability()" style="width:100%;padding:16px;background:linear-gradient(135deg,#64b5f6 0%,#42a5f5 100%);color:white;border:none;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 4px 12px rgba(100,181,246,0.3);transition:transform 0.2s;" onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
             üîç ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°
           </button>

           <!-- Result Display -->
           <div id="ai-result" style="margin-top:20px;display:none;">
             <div id="ai-result-content" style="padding:20px;border-radius:12px;border:2px solid;"></div>
           </div>
         </div>
       </div>
     </div>
   </main>
   <footer style="background: linear-gradient(135deg,#80deea 0%,#81c784 100%); padding:20px;text-align:center;width:100%;"><p style="color:white;font-size:14px;margin:0;">¬© 2024 ‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ô‡∏≠‡∏Å ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡πÄ‡∏ß‡∏ä‡∏ä‡∏≤‡∏£‡∏±‡∏Å‡∏©‡πå ‡∏•‡∏≥‡∏õ‡∏≤‡∏á | Smart Bed Admission Planner</p></footer>
  </div>
  <script src="predict-functions.js?v=20251217-03"></script>
 </body>
</html>
